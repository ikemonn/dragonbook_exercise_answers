## 2
- 原始プログラム → トークン → 構文解析器 → 構文木 → 中間コード生成器 → 3アドレスコード

## 2.2.1 文法の定義
- プログラムの構文を規定する記法
  - 文脈自由文法

- 文脈自由文法は4つの定義からなる
  - 終端記号(トークン)の集合
    - if () とか
  - 非終端記号の集合
    - 変数
  - 生成規則の集合
  - 開始記号としての1つの終端記号の指定

## 2.2.2 導出
- 文法は開始記号から出発して、非終端記号をそれに対する生成規則の本体で置き換える操作の繰り返しによって記号列を導出する
- 構文解析
  - 終端記号列が与えられた時、それがどのようにして文法の開始記号から導出されるかを明らかにする
  - 導出が不可能ならエラーを報告する

## 2.2.3 解析木
- 解析木
  - 言語に含まれる文字列が、その文法の開始記号から、どのように導出できるかを図示したもの
  - 性質
    - 根は開始記号をラベルに持つ
    - 各葉は終端記号または∈をラベルに持つ
    - 内部接点は非終端記号をラベルに持つ
    - ある内部節点が非終端記号Aをラベルに持ち、その接点のコラベルが左から右にX, Y, Zなら、A→X,Y,Z
  - 用語
    - 根は一番上の点
    - 子を持たない節点を葉
    - 1つでも子を持つ節点を内部節点

## 2.2.4 冗長性
- 曖昧
  - 文法によっては1つの終端記号列に対して、それを導出する解析着が2種類以上生成できる時のこと

## 2.2.5 演算子の結合性
- 9 + 5 + 2 = (9 + 5) + 2
- 9 - 5 - 2 = (9 - 5) - 2
  - この5のようにオペランドの左右に演算子が現れる場合には、どちらの演算子をそのオペランドに適用するのかを決めておく必要がある
  - オペランドが両側にせ符号を持つ時、そのオペランドは左の演算子側に属すので、+は左結合性を持つという
  - + - * / は左結合

- = は右結合性を持つ
  - a = b = c → a = (b = c)
  - 記号列
    - right -> letter = right | left
    - letter -> a | b | .. | z

## 2.2.6 演算子の優先順位
- * と + では、* は + よりも高い優先順位を持つ
- 記号表で表す
  - 2レベルの優先順位に対して、2個の非終端記号 expr(式) と term(項)を作る
  - 式の中での基本になる単位要素を作り出すための非終端記号factorを用意する
  - 基本単位は数字およびカッコで括られた式
    - factor -> digit | (expr)
  - * と / は左結合性をもち優先順位が高い
    - term -> term * factor | term / factor | factor
  - expr は加工演算子で区切られたtemrの並びを生成する
    - expr -> expr + term | expr - term | term
  - まとめると
    - expr -> expr + term | expr - term | term
    - term -> term * factor | term / factor | factor
    - factor -> digit | (expr)

## 2.3 構文手動翻訳
- 構文手動翻訳は、文法中の生成規則にほかの規則やプログラム片を付加することによって処理内容を規定する　
- expr -> expr1 + term
  - exprt1を翻訳する
  - termを翻訳する
  - +を翻訳する
- 属性
  - プログラム要素に関係する何かしらの性質のこと
    - データ型、生成されるコードの命令数、メモリの番地等

- 翻訳スキーム
  - 文法の各生成規則にプログラム片を関連させるという考え

- 合成属性
  - 解析木の節点Nにおける値がNの子たちと、N自身の属性値によって決まるときの属性のこと
- 相続属性
  - 解析木の節点において自分自身と親兄弟の節点における属性値から決まる値を持つこと

## 2.3.5 翻訳スキーム
- 構文手動翻訳スキームは、文法中の生成規則にプログラム片を付与することによって翻訳を規定する記法
- 意味動作
  - 生成規則の本体に埋め込むプログラム片
- 先行走査と後行走査
  - 先行走査
    - 節点を訪れた時点で動作を実行する
  - 後行走査
    - 最後に節点を離れる時に動作を実行する
## 2.4 構文解析
- 下向き構文解析
  - 根の作成から処理を始めて葉へ向かって進む
  - 効率のよい構文解析器を手作業で簡単に作成できるので一般的
- 上向き構文解析
  - 葉の作成から処理を始めて値へ向かって進む
  - 大きなクラスに属する文法と翻訳スキームを扱うことができる
  - 文法から直接構文解析器を生成するソフトウェアツールではこちらを使うものが多い

## 2.4.1 下向き構文解析
- 先読み記号
  - 入力記号列の中で、今調べている終端記号のこと

## 2.4.2 予測型構文解析
- 再帰下降構文解析
  - 一群の再帰的手続きを使用して入力を処理する

## 2.5.1 抽象構文と具象構文
- 抽象構文木(構文木)
  - 各内部節点が演算子を表し、その子が演算子のオペランドを表す
- 構文木と解析木の違い
  - 構文木(抽象構文木)
    - 内部節点がプログラム要素を表す
  - 解析木(具象構文木、具象構文)
    - 内部節点が非終端記号を表す
